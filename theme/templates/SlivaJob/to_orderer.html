{% extends 'SlivaJob/base.html' %}
{% load crispy_forms_tags %}

{% block title %}
    Заказщику
{% endblock %}

{% block content %}
    <p>Ваши заказы</p>
    <form method="post" class="max-w-sm w-full mx-auto bg-white p-8 rounded-md shadow-md">
        {% csrf_token %}
        {{ filter_form }}
        <button type="submit" value="Apply" name="submit"
                class="w-full bg-indigo-500 text-white text-sm font-bold py-2 px-4 rounded-md hover:bg-indigo-600 transition duration-300">
            Применить
        </button>
    </form>
    {#Фильтр по активному заказу#}
    {% for order in orders %}
        {% if order.status == 0 %}
            {#Заказ активен#}
            <div class="shadow-lg transition duration-500 ease-in-out transform rounded-lg w-full overflow-hidden border mb-6">
                <div class="bg-white w-full p-4">
                    <p class="text-indigo-500 font-medium text-3xl mb-2">
                        {{ order.order_name }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Количество баллов за задание: {{ order.score }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Статус: <span class="text-green-500">Открытый</span> {{ order.status }}
                    </p>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Описание:</h3>
                        <p class="ml-2">
                            {{ order.description }}
                        </p>
                    </div>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Комментарий к заданию:</h3>
                        <p class="ml-2">
                            {{ order.comment }}
                        </p>
                    </div>
                </div>
            </div>
        {% elif order.status == 1 %}
            {#Заказ взят#}
            <div class="shadow-lg transition duration-500 ease-in-out transform hover:-translate-y-5 hover:shadow-2xl rounded-lg w-full cursor-pointer overflow-hidden border mb-6">
                <div class="bg-white w-full p-4">
                    <p class="text-indigo-500 font-medium text-3xl mb-2">
                        {{ order.order_name }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Количество баллов за задание: {{ order.score }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Статус: <span class="text-Orange-500">Выполняется</span> {{ order.status }}
                    </p>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Описание:</h3>
                        <p class="ml-2">
                            {{ order.description }}
                        </p>
                    </div>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Комментарий к заданию:</h3>
                        <p class="ml-2">
                            {{ order.comment }}
                        </p>
                    </div>
                </div>
            </div>
        {% elif order.status == 2 %}
            {#Заказ зактыт#}
            <div class="shadow-lg transition duration-500 ease-in-out transform hover:-translate-y-5 hover:shadow-2xl rounded-lg w-full cursor-pointer overflow-hidden border mb-6">
                <div class="bg-white w-full p-4">
                    <p class="text-indigo-500 font-medium text-3xl mb-2">
                        {{ order.order_name }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Количество баллов за задание: {{ order.score }}
                    </p>
                    <p class="text-gray-800 text-lg font-medium mb-2">
                        Статус: <span class="text-green-500">Завершён</span>
                    </p>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Описание:</h3>
                        <p class="ml-2">
                            {{ order.description }}
                        </p>
                    </div>
                    <div class="border-t-2"></div>
                    <div class="text-gray-800 text-lg font-medium mb-2">
                        <h3 class="font-bold text-lg mb-2">Комментарий к заданию:</h3>
                        <p class="ml-2">
                            {{ order.comment }}
                        </p>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}

    <div class="button">
        <button>
            <a href="{% url 'create_order' %}"
               class="block py-2 l-3 pr-4 mr-3 text-gray-700 hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Создать
                заказ</a>
        </button>
    </div>
{% endblock %}